<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dynotic Registration</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Outfit',sans-serif}
body{min-height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:15px}
.container{width:100%;max-width:400px;background:#fff;border-radius:20px;padding:30px 25px;text-align:center;box-shadow:0 15px 30px rgba(0,0,0,.18);animation:enter .6s ease}
@keyframes enter{from{opacity:0;transform:translateY(40px)}to{opacity:1;transform:none}}
#toast {
  position: fixed;
  top: 20px; /* dari atas layar, bukan bawah */
  left: 50%;
  transform: translateX(-50%) translateY(-20px);
  background: #667eea;
  color: #fff;
  padding: 14px 25px;
  border-radius: 12px;
  font-weight: 600;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.4s, transform 0.4s;
  z-index: 9999;
}
.toggle {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
  font-size: 18px;
  user-select: none;
  padding: 4px;
  border-radius: 6px;
  transition: .2s;
}
.logo{width:70px;margin-bottom:16px}
h2{margin-bottom:20px;font-size:22px;font-weight:700;color:#222}
.field{position:relative;margin-bottom:15px;width:100%}
input{width:100%;padding:14px 16px;border-radius:12px;border:1px solid #ddd;font-size:15px;outline:none;transition:.2s}
input:focus{border:2px solid #667eea;box-shadow:none}
button{width:100%;padding:15px;border:none;border-radius:14px;font-size:16px;font-weight:700;color:#fff;background:linear-gradient(90deg,#667eea,#764ba2);cursor:pointer;transition:.2s;margin-top:10px}
button:active{transform:scale(.96)}
#error{margin-top:10px;font-size:14px;color:#e53e3e;min-height:20px}
.loader{position:fixed;inset:0;background:rgba(255,255,255,.9);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:16px;color:#667eea;opacity:0;pointer-events:none;transition:.3s}
.loader.active{opacity:1;pointer-events:auto}
</style>
</head>
<body>
  
<div class="loader" id="loader">Sendingâ€¦</div>
<div id="toast"></div>
<div class="container" id="card">
  <img src="../assets/dynotic-distribution.png" class="logo">
  <h2>Register Dynotic</h2>

  <div class="field"><input id="fullname" type="text" placeholder="Full Name"></div>
  <div class="field"><input id="email" type="email" placeholder="Email"></div>
<div class="field">
  <input id="password" type="password" placeholder="Password">
  <div class="toggle" id="eye" tabindex="0" onclick="togglePass()">ð– ‚</div>
</div>
  <div class="field"><input id="youtube" type="text" placeholder="YouTube"></div>
  <div class="field"><input id="instagram" type="text" placeholder="Instagram"></div>

  <button onclick="register()">Register</button>
  <div id="error"></div>
</div>

<script>
  function isValidURL(url, type) {
  if (!url) return false;
  let pattern;
  if(type === "youtube") {
    // Harus youtube.com atau youtu.be
    pattern = /^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/.+$/;
  } else if(type === "instagram") {
    // Harus instagram.com
    pattern = /^(https?:\/\/)?(www\.)?instagram\.com\/.+$/;
  } else {
    // generic
    pattern = /^(https?:\/\/)?([\w-]+\.)+[\w-]{2,}\/?.*$/;
  }
  return pattern.test(url);
}
 function togglePass() {
  const p = document.getElementById("password");
  const eye = document.getElementById("eye");

  if (p.type === "password") {
    p.type = "text";
    eye.textContent = "âŒ’"; // mata terbuka
  } else {
    p.type = "password";
    eye.textContent = "ð– ‚"; // mata tertutup
  }
} 
function showToast(message) {
  const toast = document.getElementById("toast");
  toast.textContent = message;
  toast.style.opacity = "1";
  toast.style.transform = "translateX(-50%) translateY(0)";
  toast.style.pointerEvents = "auto";

  setTimeout(() => {
    toast.style.opacity = "0";
    toast.style.transform = "translateX(-50%) translateY(-20px)";
    toast.style.pointerEvents = "none";
  }, 3000);
}
function register(){
  const fullname = document.getElementById("fullname").value.trim();
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();
  const youtube = document.getElementById("youtube").value.trim();
  const instagram = document.getElementById("instagram").value.trim();
  const errorEl = document.getElementById("error");

  errorEl.textContent = "";

  // Reset semua input border
const inputs = [ "fullname", "email", "password", "youtube", "instagram" ];
inputs.forEach(id => {
  document.getElementById(id).style.border = "1px solid #ddd"; // default
});

// Validasi semua field wajib diisi
let hasError = false;
inputs.forEach(id => {
  const val = document.getElementById(id).value.trim();
  if (!val) {
    document.getElementById(id).style.border = "2px solid #e53e3e"; // merah
    hasError = true;
  }
});
if (hasError) {
  errorEl.textContent = "Please fill in all required fields";
  return;
}

// Validasi link YouTube
if(!isValidURL(youtube, "youtube")) {
  document.getElementById("youtube").style.border = "2px solid #e53e3e";
  errorEl.textContent = "Please enter a valid YouTube URL";
  return;
}

// Validasi link Instagram
if(!isValidURL(instagram, "instagram")) {
  document.getElementById("instagram").style.border = "2px solid #e53e3e";
  errorEl.textContent = "Please enter a valid Instagram URL";
  return;
}
  const data = {
    fullname, email, password, youtube, instagram,
    timestamp: new Date().toISOString()
  };

  document.getElementById("loader").classList.add("active");
fetch("https://dynotic-bot.dynotic-bot.workers.dev/", {
  method: "POST",
  headers: { "Content-Type": "application/json", "Origin": "https://dynotic.web.id" },
  body: JSON.stringify({ fullname, email, password, youtube, instagram })
})
.then(res => res.json())
.then(data => {
  document.getElementById("loader").classList.remove("active");
  if (data.success) {
    showToast("Registration sent! Please wait for manual approval.");
    // Reset fields
    inputs.forEach(id => document.getElementById(id).value = "");
  } else {
    errorEl.textContent = "Failed to send registration. Try again.";
  }
})
.catch(err => {
  document.getElementById("loader").classList.remove("active");
  errorEl.textContent = "Failed to send registration. Try again.";
  console.error(err);
});
}
</script>

</body>
</html>
