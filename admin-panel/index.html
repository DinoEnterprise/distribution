<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dynotic Admin</title>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
*{box-sizing:border-box}
body{
  font-family:'Outfit',sans-serif;
  background:#f1f2f7;
  margin:0;
}

/* ===== HEADER ===== */
.header{
  background:#fff;
  padding:14px 18px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 2px 8px rgba(0,0,0,.05);
}

.header-title{
  font-size:18px;
  font-weight:700;
  color:#111;
}

/* PROFILE MENU */
.profile-wrap{
  position:relative;
}

.profile-btn{
  background:#fff;
  border:1px solid #ddd;
  padding:8px 14px;
  border-radius:999px;
  font-weight:600;
  cursor:pointer;
}

.profile-menu{
  display:none;
  position:absolute;
  right:0;
  top:45px;
  background:#fff;
  border:1px solid #ddd;
  border-radius:10px;
  min-width:160px;
  box-shadow:0 4px 12px rgba(0,0,0,.08);
  z-index:100;
}

.profile-menu button{
  width:100%;
  padding:12px;
  background:none;
  border:none;
  text-align:left;
  cursor:pointer;
  font-size:14px;
}

.profile-menu button:hover{
  background:#f5f5f5;
}

.profile-menu button.logout{
  color:#ef4444;
  font-weight:700;
}

/* ===== CONTENT ===== */
.container{
  padding:18px;
}

.card{
  background:#fff;
  padding:16px;
  border-radius:14px;
  box-shadow:0 3px 10px rgba(0,0,0,.05);
}

.menu-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:12px;
  margin-top:10px;
}

.menu-btn{
  display:flex;
  gap:12px;
  align-items:flex-start;
  padding:16px;
  border-radius:14px;
  background:#fff;
  border:1px solid #ddd;
  cursor:pointer;
  transition:.2s;
  text-align:left;
}

.menu-btn:hover{
  background:#f5f5f5;
}

.menu-icon{
  width:36px;
  height:36px;
  object-fit:contain;
}

.menu-text{
  display:flex;
  flex-direction:column;
  gap:4px;
}

.menu-title{
  font-weight:700;
  font-size:15px;
  color:#111;
}

.menu-desc{
  font-size:13px;
  color:#666;
  line-height:1.4;
}

.menu-btn:hover{
  background:#f5f5f5;
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
  <div class="header-title">Dynotic Admin</div>

  <div class="profile-wrap">
    <button class="profile-btn" onclick="toggleProfile()">Admin ▾</button>

    <div class="profile-menu" id="profileMenu">
      <button onclick="location.href='admin-profile.html'">Profile</button>
      <button class="logout" onclick="logout()">Logout</button>
    </div>
  </div>
</div>

<!-- CONTENT -->
<div class="container">
 <div class="card">
  <h3 style="margin:0 0 10px;font-size:16px">Admin Menu</h3> 
  <div class="menu-grid">

  <button class="menu-btn" onclick="go('admin-users.html')">
    <img src="../assets/users.png" class="menu-icon">
    <div class="menu-text">
      <div class="menu-title">Users</div>
      <div class="menu-desc">
        Kelola akun artis, saldo, dan data pengguna.
      </div>
    </div>
  </button>

  <button class="menu-btn" onclick="go('admin-releases.html')">
    <img src="../assets/releases.png" class="menu-icon">
    <div class="menu-text">
      <div class="menu-title">Releases Request</div>
      <div class="menu-desc">
        Review & approve pengajuan rilis lagu dari artis.
      </div>
    </div>
  </button>

  <button class="menu-btn" onclick="go('admin-messages.html')">
    <img src="../assets/messages.png" class="menu-icon">
    <div class="menu-text">
      <div class="menu-title">Messages</div>
      <div class="menu-desc">
        Pesan dan komunikasi antara admin & artis.
      </div>
    </div>
  </button>

  <button class="menu-btn" onclick="go('admin-withdraw.html')">
    <img src="../assets/withdraw.png" class="menu-icon">
    <div class="menu-text">
      <div class="menu-title">Withdraw Request</div>
      <div class="menu-desc">
        Permintaan penarikan saldo artis & status pembayaran.
      </div>
    </div>
  </button>

  <button class="menu-btn" onclick="go('admin-royalty.html')">
    <img src="../assets/royalty.png" class="menu-icon">
    <div class="menu-text">
      <div class="menu-title">Royalty</div>
      <div class="menu-desc">
        Rekap, distribusi, dan laporan royalti artis.
      </div>
    </div>
  </button>
      </div>
    </div>
       </div> 

<script>
firebase.initializeApp({
 apiKey:"AIzaSyBRSkmZXbTPNupefSmjXvlKLDNsaeQ2zag",
 authDomain:"dynopay-2513c.firebaseapp.com",
 databaseURL:"https://dynopay-2513c-default-rtdb.asia-southeast1.firebasedatabase.app"
});

const auth = firebase.auth();
const db = firebase.database();

/* ADMIN PROTECTION */
auth.onAuthStateChanged(user=>{
  if(!user){
    location.href="../admin";
    return;
  }

  db.ref("admins/"+user.uid).once("value").then(snap=>{
    if(!snap.exists()){
      alert("⚠ Anda bukan admin");
      auth.signOut();
    }
  });
});

function toggleProfile(){
  const m = document.getElementById("profileMenu");
  m.style.display = m.style.display==="block" ? "none" : "block";
}

function logout(){
  if(confirm("Logout dari admin panel?")){
    auth.signOut().then(()=>location.href="../admin");
  }
}

function go(page){
  location.href = page;
}

/* close menu if click outside */
document.addEventListener("click", e=>{
  if(!e.target.closest(".profile-wrap")){
    document.getElementById("profileMenu").style.display="none";
  }
});
</script>

</body>
</html>
