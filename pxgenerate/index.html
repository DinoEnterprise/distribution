<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PX Co. Bot - PX Music V5</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Outfit",sans-serif;}
html,body{height:100%;display:flex;flex-direction:column;color:#f5f3ff;background:radial-gradient(circle at 20% 30%, rgba(130,60,255,0.08), transparent 65%),radial-gradient(circle at 80% 70%, rgba(150,70,255,0.06), transparent 70%), #000;overflow-x:hidden;}
header{display:flex;align-items:center;justify-content:space-between;padding:12px 15px;background:rgba(0,0,0,0.25);backdrop-filter:blur(10px);border-radius:0 0 15px 15px;z-index:10;}
header img{width:50px;height:50px;border-radius:50%;object-fit:cover;border:2px solid #fff;}
header .info{flex:1;margin-left:10px;}
header .info .name{font-weight:600;font-size:1rem;color:#fff;text-shadow:0 0 8px #fff,0 0 12px #fff;}
header .info .status{font-size:0.8rem;color:#fff;text-shadow:0 0 6px #fff;}

.chat-container{flex:1;background:rgba(255,255,255,0.05);backdrop-filter:blur(5px);padding:15px;margin:10px;border-radius:15px;overflow-y:auto;display:flex;flex-direction:column;gap:8px;position:relative;border:1px solid rgba(255,255,255,0.2);}
.chat-bubble{max-width:70%;padding:10px 14px;border-radius:20px;font-size:0.95rem;word-wrap:break-word;display:flex;gap:8px;align-items:flex-end;line-height:1.4rem;}
.bulan{background:rgba(255,255,255,0.15);backdrop-filter:blur(5px);color:#fff;border-top-left-radius:0;justify-content:flex-start;}
.user{background:#2563eb;color:#fff;align-self:flex-end;border-top-right-radius:0;justify-content:flex-end;}

#inputArea{display:flex;gap:10px;padding:10px;border-top:1px solid rgba(255,255,255,0.3);}
#inputArea input{flex:1;padding:8px 12px;border-radius:15px;border:none;outline:none;font-size:0.95rem;display:none;opacity:0;transform:translateY(10px);}
#inputArea button{
padding:10px 16px;
border-radius:15px;
background:rgba(0,0,0,0.3);
color:#fff;
border:2px solid #fff;
cursor:pointer;
font-weight:600;
font-size:0.95rem;
transition:all 0.2s ease;
backdrop-filter:blur(6px);
box-shadow:0 0 8px rgba(255,255,255,0.6),0 4px 12px rgba(0,0,0,0.3);
}
#inputArea button:hover{
background:rgba(255,255,255,0.1);
box-shadow:0 0 12px rgba(255,255,255,0.8),0 6px 14px rgba(0,0,0,0.4);
transform:translateY(-2px);
}

/* Wizard / Menu buttons */
.step-btn{
padding:10px 16px;
border-radius:15px;
background:rgba(0,0,0,0.3);
color:#fff;
border:2px solid #fff;
cursor:pointer;
font-weight:600;
font-size:0.95rem;
transition:all 0.2s ease;
backdrop-filter:blur(6px);
box-shadow:0 0 8px rgba(255,255,255,0.6),0 4px 12px rgba(0,0,0,0.3);
}
.step-btn:hover{
background:rgba(255,255,255,0.1);
box-shadow:0 0 12px rgba(255,255,255,0.8),0 6px 14px rgba(0,0,0,0.4);
transform:translateY(-2px);
}

/* Animasi */
.chat-bubble-anim{opacity:0;transform:translateY(10px);animation:fadeSlideBubble 0.4s forwards;}
@keyframes fadeSlideBubble{to{opacity:1;transform:translateY(0);}}

.step-btn-anim{opacity:0;transform:translateY(20px);animation:fadeSlideInBtn 0.4s forwards;}
@keyframes fadeSlideInBtn{to{opacity:1;transform:translateY(0);}}

.start-btn-anim{opacity:0;transform:translateY(20px);animation:fadeSlideInBtn 0.5s forwards;}

.typing-anim{opacity:0;transform:translateY(10px);animation:fadeSlideTyping 0.4s forwards;}
@keyframes fadeSlideTyping{to{opacity:1;transform:translateY(0);}}

.dots{display:flex;gap:4px;}
.dots div{width:6px;height:6px;background:#fff;border-radius:50%;animation:blink 1.4s infinite both;}
.dots div:nth-child(2){animation-delay:.2s}
.dots div:nth-child(3){animation-delay:.4s}
@keyframes blink{0%{opacity:.2}20%{opacity:1}100%{opacity:.2}}

.menu-btn-container{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;}
.showInput{display:block !important;animation:fadeSlideTyping 0.4s forwards;}
</style>
</head>
<body>
<header>
<img src="https://i.imgur.com/hYvP4vp.png" alt="PX Co. Bot Avatar">
<div class="info">
  <div class="name">PX Co. Bot</div>
  <div class="status">Online</div>
</div>
</header>

<div class="chat-container" id="chatContainer"></div>

<div id="inputArea">
  <input type="text" id="userInput" placeholder="Tulis jawaban..." />
  <button id="sendBtn" onclick="handleInput()">Kirim</button>
</div>

<script>
const chatContainer = document.getElementById('chatContainer');
const input = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');

let step = 0;
let userData = {judul:'', style:'', gender:''};

window.addEventListener('DOMContentLoaded',()=>{
  addBubble("Selamat Datang di PX Music!", 'bulan', ()=>{
    setTimeout(addStartButton, 500);
  });
});

function addBubble(msg,type='bulan',callback){
  const bubble = document.createElement('div');
  bubble.classList.add('chat-bubble',type,'chat-bubble-anim');
  bubble.innerText = msg;
  chatContainer.appendChild(bubble);
  chatContainer.scrollTop = chatContainer.scrollHeight;
  if(callback) callback();
}

function addStartButton(){
  const btn = document.createElement('button');
  btn.innerText = "Start PX Music V5";
  btn.className = 'step-btn start-btn-anim';
  btn.onclick = ()=>{
    btn.remove();
    nextStep();
  };
  const container = document.createElement('div');
  container.style.display='flex';
  container.style.justifyContent='center';
  container.style.marginTop='5px';
  container.appendChild(btn);
  chatContainer.appendChild(container);
  chatContainer.scrollTop = chatContainer.scrollHeight;
}

function showTyping(callback){
  const bubble=document.createElement("div");
  bubble.className="typing bulan typing-anim";
  const dots=document.createElement("div");
  dots.className="dots";
  dots.innerHTML=`<div></div><div></div><div></div>`;
  bubble.appendChild(dots);
  chatContainer.appendChild(bubble);
  chatContainer.scrollTop=chatContainer.scrollHeight;
  setTimeout(()=>{
    bubble.remove();
    if(callback) callback();
  },1000);
}

function showInput(){
  input.classList.add('showInput'); 
  input.disabled=false; 
  sendBtn.disabled=false; 
  input.focus();
}
function hideInput(){
  input.value='';
  input.classList.remove('showInput'); 
  input.disabled=true; 
  sendBtn.disabled=true;
}

function nextStep(){
  step++;
  switch(step){
    case 1:
      showTyping(()=>{
        addBubble("Pilih tipe generasi musik (PX Music V5):");
        addMenuButtons(['Text To Music','Instrumen (Belum Support)'],[()=>nextStep(),()=>showTyping(()=>addBubble("Instrumen belum support"))]);
      });
      break;
    case 2:
      showTyping(()=>{
        addBubble("ðŸŽµ PX Music V5 - Custom Mode\nãƒ»Tipe: Dengan Lirik\nãƒ»Mode: Custom\nLangkah 1: Masukkan Judul Lagu");
        showInput();
      });
      break;
    case 3:
      showTyping(()=>{
        addBubble(`ðŸŽµ PX Music V5 - Custom Mode\nãƒ»Judul: ${userData.judul}\nLangkah 2: Masukkan Style (misal: metal, rock, pop)`);
        showInput();
      });
      break;
    case 4:
      showTyping(()=>{
        addBubble(`ðŸŽµ PX Music V5 - Custom Mode\nãƒ»Judul: ${userData.judul}\nãƒ»Style: ${userData.style}\nLangkah 3: Pilih Gender Vokal`);
        hideInput();
        addMenuButtons(['Perempuan','Laki-Laki','Auto'],[g=>selectGender('Perempuan'),g=>selectGender('Laki-Laki'),g=>selectGender('Auto')]);
      });
      break;
    case 5:
      showTyping(()=>{
        const jobId = crypto.randomUUID();
        addBubble(`ãƒ»Job Terkirim (PX Music V5)\nãƒ»Job ID: ${jobId}\nãƒ»Status: Memproses...\nãƒ»Estimasi: 5-15 menit`);
      });
      break;
  }
}

function handleInput(){
  const val = input.value.trim();
  if(!val) return;
  addBubble(val,'user');
  hideInput();
  if(step===2) userData.judul=val;
  if(step===3) userData.style=val;
  nextStep();
}

function selectGender(g){
  userData.gender=g;
  addBubble(`Gender Vokal Dipilih: ${g}`,'user');
  document.querySelectorAll('.step-btn').forEach(b=>b.remove());
  nextStep();
}

function addMenuButtons(labels, actions){
  const btnContainer = document.createElement('div');
  btnContainer.className='menu-btn-container';
  labels.forEach((label, i) => {
    const btn = document.createElement('button');
    btn.innerText = label;
    btn.className = 'step-btn step-btn-anim';
    btn.onclick = ()=>{
      actions[i](); 
      btnContainer.remove();
    };
    btnContainer.appendChild(btn);
  });
  chatContainer.appendChild(btnContainer);
  chatContainer.scrollTop = chatContainer.scrollHeight;
}
</script>
</body>
</html>
