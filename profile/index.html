<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile - DynoPay</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Outfit",sans-serif;}
body{
  background:#f1f2f7;
  min-height:100vh;
  color:#111;
  animation:fadeIn .5s ease;
  -webkit-tap-highlight-color:transparent;
}
@keyframes fadeIn{from{opacity:0;transform:translateY(15px);}to{opacity:1;transform:translateY(0);}}

/* Header */
header{padding:12px 20px;display:flex;align-items:center;background:white;border-bottom:1px solid #eee;}
header img{height:50px;}

/* Card Animasi */
.card{
  width:90%;
  margin:20px auto;
  background:#fff;
  border-radius:20px;
  padding:25px;
  border:1px solid #ececec;
  box-shadow:0 8px 18px rgba(0,0,0,.05);
  transition:.3s transform, .3s box-shadow;
  animation:cardFade .5s ease forwards;
  opacity:0;
  transform:translateY(20px);
}
@keyframes cardFade{to{opacity:1;transform:translateY(0);}}
.card:hover{transform:translateY(-3px);box-shadow:0 10px 22px rgba(0,0,0,.08);}

/* Input group */
.input-group{margin-bottom:15px;}
.input-group input{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:1px solid #ddd;
  font-size:14px;
  outline:none;
  background:#f9f9f9;
}
.input-group input:focus{border-color:#111;background:#f9f9f9;}

/* Tombol Logout Animasi */
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  font-weight:700;
  color:#fff;
  background:#111;
  cursor:pointer;
  transition: transform .2s ease, filter .2s ease, box-shadow .2s ease;
  animation:buttonFade .6s ease forwards;
  opacity:0;
  transform:translateY(20px);
}
@keyframes buttonFade{to{opacity:1;transform:translateY(0);}}
button:hover{filter:brightness(90%);transform:scale(1.02);}
button:active{transform:scale(0.95);filter:brightness(70%);}

/* Profile Photo Animasi */
.profile-photo{
  width:120px;
  height:120px;
  border-radius:50%;
  object-fit:cover;
  border:2px solid #ddd;
  margin-bottom:12px;
  pointer-events:none;
  animation:photoFade .5s ease forwards;
  opacity:0;
  transform:translateY(20px);
}
@keyframes photoFade{to{opacity:1;transform:translateY(0);}}

/* Bottom Nav */
.bottom-nav{
  background:#fff;
  border-top:1px solid #eee;
  padding:10px 0;
  display:flex;
  justify-content:space-around;
  align-items:center;
  position:fixed;
  bottom:0; left:0; width:100%;
}
.nav-item{
  text-align:center;
  font-size:13px;
  opacity:.75;
  cursor:pointer;
  padding:4px 14px;
  border-radius:12px;
  transition:.12s ease, transform .2s ease;
  outline:none;
  -webkit-tap-highlight-color:transparent;
}
.nav-item img{width:28px;display:block;margin:auto;margin-bottom:4px;}
.nav-item:hover{opacity:1;transform:scale(1.05);}
.nav-item:active{transform:scale(0.94);filter:brightness(85%);box-shadow: inset 0 2px 6px rgba(0,0,0,0.2);}
</style>
</head>
<body>

<header>
  <img src="../assets/dynopay2.png" alt="DynoPay">
</header>

<!-- FOTO PROFIL READ-ONLY -->
<div class="card" style="text-align:center;">
  <img id="profilePhoto" class="profile-photo" src="../assets/profile.png" alt="Profile Photo">
</div>

<!-- INFO ARTIS READ-ONLY -->
<div class="card">
  <div class="card-title">Nama Artis</div>
  <div class="input-group">
    <input type="text" id="nama" readonly>
  </div>
  <div class="card-title">Email</div>
  <div class="input-group">
    <input type="text" id="email" readonly>
  </div>
  <div class="card-title">Label</div>
  <div class="input-group">
    <input type="text" id="label" readonly value="Dynotic">
  </div>

  <!-- LOGOUT BUTTON -->
  <button onclick="logout()">Logout</button>
</div>

<!-- NAV BAWAH -->
<div class="bottom-nav">
  <div class="nav-item clickable" onclick="goDashboard()">
    <img src="../assets/dasboard.png" alt="Dashboard">
    Dashboard
  </div>
  <div class="nav-item clickable" onclick="goWithdraw()">
    <img src="../assets/withdraw.png" alt="Withdraw">
    Withdraw
  </div>
  <div class="nav-item clickable">
    <img src="../assets/profile.png" alt="Profile">
    Profile
  </div>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyBRSkmZXbTPNupefSmjXvlKLDNsaeQ2zag",
  authDomain:"dynopay-2513c.firebaseapp.com",
  databaseURL:"https://dynopay-2513c-default-rtdb.asia-southeast1.firebasedatabase.app"
});

const auth = firebase.auth();
const db = firebase.database();

// Proteksi login
auth.onAuthStateChanged(user=>{
  if(!user) window.location.href="../login";
  else loadProfile(user.uid);
});

// Load profile
function loadProfile(uid){
  db.ref("users/"+uid).once("value").then(snap=>{
    if(snap.exists()){
      const data = snap.val();
      document.getElementById("nama").value = data.nama || "";
      document.getElementById("email").value = data.email || "";
      document.getElementById("profilePhoto").src = data.photoURL || "../assets/profile.png";
    }
  });
}

// Logout
function logout(){ auth.signOut().then(()=>window.location.href="../login"); }

// Navigasi
function goDashboard(){ window.location.href="../dynopay"; }
function goWithdraw(){ window.location.href="../withdraw"; }
</script>

</body>
</html>
